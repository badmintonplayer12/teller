<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Badminton Poengteller</title>
  <style>
    :root{
      --bg:#0f172a;--panel:#111827;--panel2:#1f2937;--fg:#e5e7eb;--ok:#22c55e;--bad:#ef4444;--gold:#facc15;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--fg);display:flex;flex-direction:column}
    header{background:var(--panel2);padding:.6rem 1rem;display:flex;align-items:center;gap:.75rem}
    header h1{margin:0;font-size:1rem}
    #sets{margin-left:auto;font-weight:700;opacity:.9}

    .wrap{flex:1;display:grid;grid-template-columns:1fr 1fr;gap:1rem;padding:1rem}
    .side{position:relative;background:var(--panel);border-radius:.8rem;padding:1rem;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .badge{position:absolute;top:.5rem;right:.5rem;width:2.2rem;height:2.2rem;border-radius:999px;background:var(--ok);color:#06210f;font-weight:900;display:none;place-items:center;box-shadow:0 3px 10px rgba(0,0,0,.35)}
    .name{font-size:1.2rem;margin-bottom:.5rem}
    .name input{font:inherit;color:var(--fg);background:var(--panel2);border:1px solid #0008;border-radius:.4rem;padding:.25rem .5rem;text-align:center;width:100%}
    .score{font-size:16vw;font-weight:900;line-height:1}
    @media(min-width:900px){.score{font-size:18vh}}
    .buttons{display:flex;gap:1rem;margin-top:1rem}
    .buttons button{font-size:1.4rem;padding:1rem 1.75rem;border:0;border-radius:.7rem;cursor:pointer;font-weight:900}
    .plus{background:var(--ok);color:#06210f}
    .minus{background:var(--bad);color:#fff}

    footer{background:var(--panel2);padding:.6rem 1rem;display:flex;gap:.6rem;justify-content:center}
    footer button{padding:.6rem 1rem;border-radius:.6rem;border:0;background:#0b1220;color:var(--fg);font-weight:700;cursor:pointer}

    /* Finale overlay + effekter */
    #finalMsg{position:fixed;inset:0;display:none;align-items:center;justify-content:center;text-align:center;font-size:clamp(2rem,6vw,5rem);font-weight:900;color:var(--gold);letter-spacing:.05em;text-transform:uppercase;padding:1rem;z-index:30;pointer-events:none;text-shadow:0 2px 12px rgba(0,0,0,.7)}
    #effects{position:fixed;inset:0;pointer-events:none;z-index:25}
    .balloon{position:absolute;top:-10%;width:28px;height:38px;border-radius:14px 14px 14px 14px / 18px 18px 20px 20px;background:#38bdf8;animation:fall linear forwards;box-shadow:0 4px 10px rgba(0,0,0,.3)}
    .balloon:after{content:"";position:absolute;bottom:-12px;left:50%;width:2px;height:18px;background:#94a3b8;transform:translateX(-50%)}
    @keyframes fall{to{transform:translateY(120vh);opacity:.95}}
  </style>
</head>
<body>
  <header>
    <h1>üè∏ Badminton Poengteller</h1>
    <div id="sets">Sett: 0‚Äì0</div>
  </header>

  <div class="wrap">
    <div class="side" id="sideA">
      <div class="badge" id="badgeA">1</div>
      <div class="name"><input id="nameA" value="Spiller A" /></div>
      <div class="score" id="scoreA">0</div>
      <div class="buttons">
        <button class="plus" id="plusA">+1</button>
        <button class="minus" id="minusA">‚àí1</button>
      </div>
    </div>

    <div class="side" id="sideB">
      <div class="badge" id="badgeB">1</div>
      <div class="name"><input id="nameB" value="Spiller B" /></div>
      <div class="score" id="scoreB">0</div>
      <div class="buttons">
        <button class="plus" id="plusB">+1</button>
        <button class="minus" id="minusB">‚àí1</button>
      </div>
    </div>
  </div>

  <div id="finalMsg"></div>
  <div id="effects"></div>

  <footer>
    <button id="resetSetBtn">Nullstill sett</button>
    <button id="resetMatchBtn">Nullstill kamp</button>
  </footer>

  <script>
    let scoreA=0, scoreB=0;
    let setsA=0, setsB=0; // best av 3
    const target=21, cap=30;

    const $=s=>document.querySelector(s);

    function update(){
      $('#scoreA').textContent=scoreA;
      $('#scoreB').textContent=scoreB;
      $('#sets').textContent=`Sett: ${setsA}‚Äì${setsB}`;
      // Hj√∏rne-badger: vis 1 ved f√∏rste sett, 2 ved to sett
      const bA=$('#badgeA'), bB=$('#badgeB');
      bA.textContent = setsA>0? String(Math.min(setsA,2)) : '1';
      bB.textContent = setsB>0? String(Math.min(setsB,2)) : '1';
      bA.style.display = setsA>0 ? 'grid' : 'none';
      bB.style.display = setsB>0 ? 'grid' : 'none';
    }

    function clearEffects(){
      const fx=$('#effects');
      while(fx.firstChild) fx.removeChild(fx.firstChild);
      $('#finalMsg').style.display='none';
    }

    function launchBalloons(n=50){
      const fx=$('#effects');
      const colors=['#38bdf8','#f472b6','#34d399','#facc15','#a78bfa','#f97316'];
      for(let i=0;i<n;i++){
        const b=document.createElement('div'); b.className='balloon';
        b.style.left=(Math.random()*100)+'%';
        b.style.animationDuration=(6+Math.random()*4)+'s';
        b.style.background=colors[i%colors.length];
        fx.appendChild(b);
        setTimeout(()=>b.remove(),11000);
      }
    }

    function addPoint(side){
      if(side==='A') scoreA++; else scoreB++;
      checkSetEnd(); update();
    }
    function removePoint(side){
      if(side==='A' && scoreA>0) scoreA--; if(side==='B' && scoreB>0) scoreB--; update();
    }

    function checkSetEnd(){
      const lead=Math.abs(scoreA-scoreB);
      if((scoreA>=target||scoreB>=target)&&(lead>=2||scoreA===cap||scoreB===cap)){
        // Sett ferdig ‚Äì bare oppdater sett, INGEN gratulasjon enn√•
        if(scoreA>scoreB) setsA++; else setsB++;
        scoreA=0; scoreB=0; update();
        // Kamp ferdig? (best av 3)
        if(setsA===2 || setsB===2){
          const vinner = setsA===2 ? $('#nameA').value : $('#nameB').value;
          const taper = setsA===2 ? $('#nameB').value : $('#nameA').value;
          const fm=$('#finalMsg');
          fm.textContent = `GRATULERER ${vinner}! DU VANT KAMPEN. BRA JOBBA ${taper}, DU GJORDE DITT BESTE.`;
          fm.style.display='flex';
          launchBalloons(60);
        }
      }
    }

    $('#plusA').onclick=()=>addPoint('A');
    $('#plusB').onclick=()=>addPoint('B');
    $('#minusA').onclick=()=>removePoint('A');
    $('#minusB').onclick=()=>removePoint('B');
    $('#resetSetBtn').onclick=()=>{ scoreA=0; scoreB=0; clearEffects(); update(); };
    $('#resetMatchBtn').onclick=()=>{ scoreA=0; scoreB=0; setsA=0; setsB=0; clearEffects(); update(); };

    update();
  </script>
</body>
</html>
