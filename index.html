<!DOCTYPE html><html lang="no"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><title>Badminton Poengteller</title><style>:root{--gap:clamp(12px,3vw,36px);--divider:2px}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}html,body{height:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:#0f172a;color:#fff;display:flex;flex-direction:column;max-width:100vw;overflow-x:hidden}header{background:#1f2937;padding:.5rem 1rem;display:flex;align-items:center;gap:1rem;justify-content:space-between;position:relative}header h1{font-size:1rem;margin:0}#version{position:absolute;top:.3rem;right:.6rem;font-size:.75rem;color:#9ca3af;pointer-events:none}.wrap{flex:0 0 auto;min-height:100vh;display:grid;grid-template-columns:1fr var(--divider) 1fr;column-gap:var(--gap);padding:var(--gap);align-items:stretch;overflow:hidden;position:relative}.divider{width:var(--divider);background:#1e293b;z-index:2}.side{position:relative;background:#111827;border-radius:.8rem;padding:clamp(8px,1.8vw,16px);display:flex;flex-direction:column;align-items:center;justify-content:flex-start;overflow:hidden;will-change:transform;transition:transform 1s ease;z-index:1}.wrap.swap-go .left{transform:translateX(calc(100% + var(--gap) + var(--divider)))}.wrap.swap-go .right{transform:translateX(calc(-100% - var(--gap) - var(--divider)))}.no-trans .side{transition:none!important}.name{min-height:clamp(36px,6vh,56px);display:flex;align-items:center;justify-content:center;width:100%;margin:0 0 .25rem 0}.name input{font:inherit;color:#e5e7eb;background:#1f2937;border:1px solid #0008;border-radius:.5rem;padding:.35rem .75rem;text-align:center;width:min(15ch,90%);max-width:15ch;overflow:hidden;text-overflow:ellipsis;transition:color .6s,text-shadow .6s}.setCounter{position:absolute;top:.5rem;right:.75rem;background:#22c55e;color:#06210f;font-weight:900;border-radius:999px;padding:.2rem .6rem;min-width:2rem;text-align:center}.scoreBox{flex:1 1 auto;width:100%;min-height:0;display:flex;align-items:center;justify-content:center;overflow:hidden}.score{width:100%;display:flex;justify-content:center;align-items:center;text-align:center;font-weight:900;line-height:.92;cursor:pointer;user-select:none;-webkit-user-select:none;white-space:nowrap;overflow:hidden;font-variant-numeric:tabular-nums;will-change:transform,text-shadow;padding:0 2vw;transition:color .6s,text-shadow .6s}.digits{display:flex;gap:.08em;align-items:baseline;max-width:100%;overflow:hidden}.digit{display:inline-block;width:1ch;text-align:center}.digit.ghost{visibility:hidden}#sets{padding:.4rem 1rem;text-align:center;font-size:1rem}#winnerMsg{padding:.75rem 1rem 0;text-align:center;font-size:clamp(1.1rem,3.5vw,2rem);color:#facc15;font-weight:900;white-space:pre-line}.pop{animation:glowBurst .55s ease-out 1}@keyframes glowBurst{0%{text-shadow:0 0 0 rgba(96,165,250,0);transform:scale(1)}20%{text-shadow:0 0 30px rgba(96,165,250,.95),0 0 70px rgba(59,130,246,.8),0 0 110px rgba(37,99,235,.7);transform:scale(1.08)}60%{text-shadow:0 0 20px rgba(96,165,250,.55),0 0 50px rgba(59,130,246,.45);transform:scale(1.03)}100%{text-shadow:0 0 0 rgba(96,165,250,0);transform:scale(1)}}.winner{color:#ffd700!important;animation:goldPulse 3s ease-in-out infinite}.winnerName{color:#ffd700!important;animation:goldPulse 3s ease-in-out infinite}@keyframes goldPulse{0%{text-shadow:0 0 3px rgba(255,215,0,.25),0 0 6px rgba(255,220,50,.2)}50%{text-shadow:0 0 8px rgba(255,215,0,.5),0 0 16px rgba(255,220,50,.4)}100%{text-shadow:0 0 3px rgba(255,215,0,.25),0 0 6px rgba(255,220,50,.2)}}.measuring .score{transform:none!important}.score::selection{background:transparent}.input-locked .score,.input-locked button{pointer-events:none!important}.belowFold{height:calc(100vh + 24px);display:grid;grid-template-columns:1fr 1fr;gap:var(--gap);padding:0 var(--gap);align-items:flex-start}.belowFold .minusBtn{position:sticky;top:10px;justify-self:center;font-size:1.3rem;padding:.55rem 1rem;border-radius:.6rem;border:0;background:#ef4444;color:#fff;cursor:pointer}</style></head><body><header><h1>üè∏ Badminton Poengteller</h1><button id="fsBtn">‚õ∂ Fullskjerm</button><div id="version">v5.6</div></header><div id="sets">Sett: 0-0</div><div class="wrap" id="wrap"><div class="side left" id="sideA"><div id="setCounterA" class="setCounter" style="display:none">0</div><div class="name"><input id="nameA" value="Spiller A"/></div><div class="scoreBox"><div class="score" id="scoreA"><span class="digits" id="A_digits"><span class="digit" id="A_tens">0</span><span class="digit" id="A_ones">0</span></span></div></div></div><div class="divider"></div><div class="side right" id="sideB"><div id="setCounterB" class="setCounter" style="display:none">0</div><div class="name"><input id="nameB" value="Spiller B"/></div><div class="scoreBox"><div class="score" id="scoreB"><span class="digits" id="B_digits"><span class="digit" id="B_tens">0</span><span class="digit" id="B_ones">0</span></span></div></div></div></div><section class="belowFold"><button class="minusBtn" id="minusA">‚àí1</button><button class="minusBtn" id="minusB">‚àí1</button></section><div id="winnerMsg"></div><footer style="text-align:center;padding:.5rem 1rem .9rem;display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap;"><button id="swapBtn">Bytt side</button><button id="resetSetBtn">Nullstill sett</button><button id="newMatchBtn">Start ny kamp</button><button id="resetMatchBtn">Nullstill kamp</button></footer><script>let scoreA=0,scoreB=0,setsA=0,setsB=0,target=21,cap=30,currentSet=1,swappedAt11=false,locked=false,swapping=false;const $=s=>document.querySelector(s);function update(){$('#sets').textContent=`Sett: ${setsA}-${setsB}`;const cA=$('#setCounterA'),cB=$('#setCounterB');cA.style.display=setsA>0?'flex':'none';cB.style.display=setsB>0?'flex':'none';if(setsA>0)cA.textContent=setsA;if(setsB>0)cB.textContent=setsB;const setDigits=(sc,p)=>{const t=Math.floor(sc/10),o=sc%10,te=$(`#${p}_tens`),oe=$(`#${p}_ones`);if(sc<10){te.textContent='0';te.classList.add('ghost')}else{te.textContent=String(t);te.classList.remove('ghost')}oe.textContent=String(o)};setDigits(scoreA,'A');setDigits(scoreB,'B')}function fitScores(){document.body.classList.add('measuring');const base=100,sA=$('#scoreA'),sB=$('#scoreB');if(!sA||!sB){document.body.classList.remove('measuring');return}sA.style.fontSize=base+'px';sB.style.fontSize=base+'px';const sideA=$('#sideA'),sideB=$('#sideB'),nameAH=$('#sideA .name')?.offsetHeight||0,nameBH=$('#sideB .name')?.offsetHeight||0,sidePad=e=>{const cs=getComputedStyle(e);return(parseFloat(cs.paddingTop)||0)+(parseFloat(cs.paddingBottom)||0)},availHA=Math.max(40,(sideA?.clientHeight||0)-nameAH-(sideA?sidePad(sideA):0)),availHB=Math.max(40,(sideB?.clientHeight||0)-nameBH-(sideB?sidePad(sideB):0)),boxA=$('#sideA .scoreBox'),boxB=$('#sideB .scoreBox'),padX=e=>{const cs=getComputedStyle(e);return(parseFloat(cs.paddingLeft)||0)+(parseFloat(cs.paddingRight)||0)},availWA=Math.max(40,(boxA?.clientWidth||0)-padX(sA)),availWB=Math.max(40,(boxB?.clientWidth||0)-padX(sB)),aRect=$('#A_digits')?.getBoundingClientRect(),bRect=$('#B_digits')?.getBoundingClientRect();if(!aRect||!bRect){document.body.classList.remove('measuring');return}const scaleA=Math.min(availWA/Math.max(1,aRect.width),availHA/Math.max(1,aRect.height)),scaleB=Math.min(availWB/Math.max(1,bRect.width),availHB/Math.max(1,bRect.height)),scale=Math.max(.01,Math.min(scaleA,scaleB)),f=Math.floor(base*scale);sA.style.fontSize=f+'px';sB.style.fontSize=f+'px';document.body.classList.remove('measuring')}function bump(el){el.classList.remove('pop');void el.offsetWidth;el.classList.add('pop');setTimeout(()=>el.classList.remove('pop'),550)}function addPoint(s){if(locked||swapping)return;if(s==='A')scoreA++;else scoreB++;checkSetEnd();update();bump($(s==='A'?'#scoreA':'#scoreB'));fitScores()}function removePoint(s){if(locked||swapping)return;if(s==='A'&&scoreA>0)scoreA--;if(s==='B'&&scoreB>0)scoreB--;update();fitScores()}function checkSetEnd(){const lead=Math.abs(scoreA-scoreB);if((scoreA>=target||scoreB>=target)&&(lead>=2||scoreA===cap||scoreB===cap)){if(scoreA>scoreB)setsA++;else setsB++;if(setsA===2||setsB===2){const nameA=$('#nameA')?.value||'Spiller A',nameB=$('#nameB')?.value||'Spiller B',winner=setsA===2?nameA:nameB,loser=setsA===2?nameB:nameA;$('#winnerMsg').textContent=`üéâ GRATULERER ${winner.toUpperCase()}! DU VANT KAMPEN!\nüëè BRA JOBBA ${loser.toUpperCase()}, DU GJORDE DITT BESTE.`;if(setsA===2){$('#scoreA').classList.add('winner');$('#nameA').classList.add('winnerName')}else{$('#scoreB').classList.add('winner');$('#nameB').classList.add('winnerName')}locked=true;return}scoreA=0;scoreB=0;currentSet++;swappedAt11=false;startVisualSwap()}if(currentSet===3&&!swappedAt11&&(scoreA===11||scoreB===11)){startVisualSwap();swappedAt11=true}}function startVisualSwap(){if(swapping)return;swapping=true;document.body.classList.add('input-locked');const wrap=$('#wrap'),left=$('.side.left'),right=$('.side.right'),divider=document.querySelector('.divider');if(!(wrap instanceof Node)||!(left instanceof Node)||!(right instanceof Node)||!(divider instanceof Node)){swapping=false;document.body.classList.remove('input-locked');return}wrap.classList.add('swap-go');let finished=false;const complete=()=>{if(finished)return;finished=true;left.removeEventListener('transitionend',onEnd);right.removeEventListener('transitionend',onEnd);try{wrap.classList.add('no-trans');wrap.insertBefore(right,left);if(divider.parentNode!==wrap)wrap.appendChild(divider);wrap.insertBefore(divider,left);left.classList.remove('left');left.classList.add('right');right.classList.remove('right');right.classList.add('left')}catch(err){}wrap.classList.remove('swap-go');void wrap.offsetWidth;wrap.classList.remove('no-trans');update();fitScores();swapping=false;document.body.classList.remove('input-locked')};const onEnd=e=>{if(e.target!==left&&e.target!==right)return;complete()};left.addEventListener('transitionend',onEnd);right.addEventListener('transitionend',onEnd);setTimeout(complete,1200)}function swapSides(){startVisualSwap()}function resetSet(){if(locked||swapping)return;scoreA=0;scoreB=0;swappedAt11=false;$('#winnerMsg').textContent='';$('#scoreA').classList.remove('winner');$('#scoreB').classList.remove('winner');$('#nameA').classList.remove('winnerName');$('#nameB').classList.remove('winnerName');update();fitScores()}function resetMatch(){scoreA=0;scoreB=0;setsA=0;setsB=0;currentSet=1;swappedAt11=false;locked=false;$('#winnerMsg').textContent='';$('#scoreA').classList.remove('winner');$('#scoreB').classList.remove('winner');$('#nameA').classList.remove('winnerName');$('#nameB').classList.remove('winnerName');update();fitScores()}function startNewMatch(){resetMatch()}function toggleFullscreen(){const btn=$('#fsBtn');if(!document.fullscreenElement){document.documentElement.requestFullscreen();if(btn)btn.textContent='‚§¢ Avslutt fullskjerm'}else{document.exitFullscreen();if(btn)btn.textContent='‚õ∂ Fullskjerm'}}window.addEventListener('DOMContentLoaded',()=>{$('#scoreA')?.addEventListener('click',()=>addPoint('A'));$('#scoreB')?.addEventListener('click',()=>addPoint('B'));$('#minusA')?.addEventListener('click',()=>removePoint('A'));$('#minusB')?.addEventListener('click',()=>removePoint('B'));$('#swapBtn')?.addEventListener('click',swapSides);$('#resetSetBtn')?.addEventListener('click',resetSet);$('#newMatchBtn')?.addEventListener('click',startNewMatch);$('#resetMatchBtn')?.addEventListener('click',resetMatch);$('#fsBtn')?.addEventListener('click',toggleFullscreen);update();queueFit()});const queueFit=(()=>{let raf=0,t=0;return function(){cancelAnimationFrame(raf);clearTimeout(t);raf=requestAnimationFrame(()=>{fitScores();t=setTimeout(fitScores,60)})}})();window.addEventListener('resize',queueFit);document.addEventListener('fullscreenchange',queueFit);if(window.visualViewport){visualViewport.addEventListener('resize',queueFit)}window.addEventListener('orientationchange',()=>{setTimeout(queueFit,60)});window.addPoint=addPoint;window.removePoint=removePoint;window.swapSides=swapSides;window.resetSet=resetSet;window.resetMatch=resetMatch;window.startNewMatch=startNewMatch;window.toggleFullscreen=toggleFullscreen;</script></body></html>
